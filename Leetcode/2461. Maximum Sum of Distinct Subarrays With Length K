Example 1:

Input: nums = [1,5,4,2,9,9,9], k = 3
Output: 15
Explanation: The subarrays of nums with length 3 are:
- [1,5,4] which meets the requirements and has a sum of 10.
- [5,4,2] which meets the requirements and has a sum of 11.
- [4,2,9] which meets the requirements and has a sum of 15.
- [2,9,9] which does not meet the requirements because the element 9 is repeated.
- [9,9,9] which does not meet the requirements because the element 9 is repeated.
We return 15 because it is the maximum subarray sum of all the subarrays that meet the conditions
==========================================================================================================

import java.util.HashMap;

class Solution {
    public long maximumSubarraySum(int[] nums, int k) {
        int n = nums.length;
        if (n < k) return 0L;
        HashMap<Integer, Integer> freq = new HashMap<>();
        long sum = 0L;
        long max = 0L;
        // build first window
        for (int i = 0; i < k; i++) {
            sum += nums[i];
            freq.put(nums[i], freq.getOrDefault(nums[i], 0) + 1);
        }
        if (freq.size() == k) max = sum;
        // slide window
        for (int i = k; i < n; i++) {
            // add incoming
            sum += nums[i];
            freq.put(nums[i], freq.getOrDefault(nums[i], 0) + 1);
            // remove outgoing
            int out = nums[i - k];
            int cnt = freq.get(out);
            if (cnt == 1) freq.remove(out);
            else freq.put(out, cnt - 1);
            sum -= out;

            if (freq.size() == k) max = Math.max(max, sum);
        }
        return max;
    }
}
